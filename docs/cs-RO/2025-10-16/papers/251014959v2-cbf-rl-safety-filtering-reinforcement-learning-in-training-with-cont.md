---
layout: default
title: CBF-RL: Safety Filtering Reinforcement Learning in Training with Control Barrier Functions
---

# CBF-RL: Safety Filtering Reinforcement Learning in Training with Control Barrier Functions

<div class="paper-toolbar">
  <a href="https://arxiv.org/abs/2510.14959" class="toolbar-btn" target="_blank">ğŸ“„ arXiv: 2510.14959v2</a>
  <a href="https://arxiv.org/pdf/2510.14959.pdf" class="toolbar-btn" target="_blank">ğŸ“¥ PDF</a>
  <button class="toolbar-btn favorite-btn" data-arxiv-id="2510.14959v2" data-paper-url="__CURRENT_PAGE__" onclick="toggleFavorite(this, '2510.14959v2', 'CBF-RL: Safety Filtering Reinforcement Learning in Training with Control Barrier Functions')" title="æ·»åŠ åˆ°æ”¶è—å¤¹">â˜† æ”¶è—</button>
  <button class="toolbar-btn" onclick="copyLinkToClipboard(this)">ğŸ”— åˆ†äº«</button>
</div>


**ä½œè€…**: Lizhi Yang, Blake Werner, Massimiliano de Sa, Aaron D. Ames

**åˆ†ç±»**: cs.RO, cs.AI, cs.LG, eess.SY

**å‘å¸ƒæ—¥æœŸ**: 2025-10-16 (æ›´æ–°: 2025-10-19)

**å¤‡æ³¨**: 8 pages

---

## ğŸ’¡ ä¸€å¥è¯è¦ç‚¹

**æå‡ºCBF-RLæ¡†æ¶ï¼Œé€šè¿‡æ§åˆ¶å±éšœå‡½æ•°åœ¨è®­ç»ƒä¸­å®‰å…¨è¿‡æ»¤å¼ºåŒ–å­¦ä¹ ç­–ç•¥**

ğŸ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¸€ï¼šæœºå™¨äººæ§åˆ¶ (Robot Control)** **æ”¯æŸ±äºŒï¼šRLç®—æ³•ä¸æ¶æ„ (RL & Architecture)**

**å…³é”®è¯**: `å¼ºåŒ–å­¦ä¹ ` `æ§åˆ¶å±éšœå‡½æ•°` `å®‰å…¨çº¦æŸ` `æœºå™¨äººæ§åˆ¶` `å®‰å…¨æ»¤æ³¢`

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. ç°æœ‰å¼ºåŒ–å­¦ä¹ æ–¹æ³•åœ¨è¿½æ±‚é«˜æ€§èƒ½æ—¶å¿½ç•¥å®‰å…¨æ€§ï¼Œå¯¼è‡´å®é™…éƒ¨ç½²ä¸­å­˜åœ¨æ½œåœ¨é£é™©ï¼Œéœ€è¦é¢å¤–çš„å®‰å…¨æœºåˆ¶ã€‚
2. CBF-RLæ¡†æ¶é€šè¿‡åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¼•å…¥æ§åˆ¶å±éšœå‡½æ•°ï¼Œå¯¹å¼ºåŒ–å­¦ä¹ ç­–ç•¥è¿›è¡Œå®‰å…¨è¿‡æ»¤ï¼Œä»è€Œå­¦ä¹ åˆ°å†…å«å®‰å…¨çº¦æŸçš„ç­–ç•¥ã€‚
3. å®éªŒè¡¨æ˜ï¼ŒCBF-RLåœ¨å¯¼èˆªå’Œäººå½¢æœºå™¨äººä»»åŠ¡ä¸­ï¼Œèƒ½å¤Ÿå®ç°æ›´å®‰å…¨çš„æ¢ç´¢ã€æ›´å¿«çš„æ”¶æ•›ï¼Œå¹¶åœ¨ä¸ç¡®å®šæ€§ä¸‹è¡¨ç°å‡ºæ›´å¼ºçš„é²æ£’æ€§ã€‚

## ğŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

å¼ºåŒ–å­¦ä¹ (RL)è™½ç„¶å¼ºå¤§ä¸”å…·æœ‰è¡¨ç°åŠ›ï¼Œä½†å¸¸å¸¸ä»¥ç‰ºç‰²å®‰å…¨æ€§ä¸ºä»£ä»·æ¥ä¼˜å…ˆè€ƒè™‘æ€§èƒ½ã€‚ç„¶è€Œï¼Œå®‰å…¨è¿è§„å¯èƒ½å¯¼è‡´ç°å®éƒ¨ç½²ä¸­çš„ç¾éš¾æ€§åæœã€‚æ§åˆ¶å±éšœå‡½æ•°(CBF)æä¾›äº†ä¸€ç§å¼ºåˆ¶æ‰§è¡ŒåŠ¨æ€å®‰å…¨æ€§çš„åŸåˆ™æ€§æ–¹æ³•ï¼Œä¼ ç»Ÿä¸Šé€šè¿‡å®‰å…¨æ»¤æ³¢å™¨åœ¨çº¿éƒ¨ç½²ã€‚è™½ç„¶ç»“æœæ˜¯å®‰å…¨çš„è¡Œä¸ºï¼Œä½†RLç­–ç•¥ä¸äº†è§£CBFè¿™ä¸€äº‹å®å¯èƒ½å¯¼è‡´ä¿å®ˆçš„è¡Œä¸ºã€‚æœ¬æ–‡æå‡ºäº†CBF-RLï¼Œä¸€ä¸ªé€šè¿‡åœ¨è®­ç»ƒä¸­å¼ºåˆ¶æ‰§è¡ŒCBFæ¥ç”Ÿæˆå…·æœ‰RLçš„å®‰å…¨è¡Œä¸ºçš„æ¡†æ¶ã€‚CBF-RLå…·æœ‰ä¸¤ä¸ªå…³é”®å±æ€§ï¼š(1)æœ€å°ç¨‹åº¦åœ°ä¿®æ”¹æ ‡ç§°RLç­–ç•¥ï¼Œä»¥é€šè¿‡CBFé¡¹ç¼–ç å®‰å…¨çº¦æŸï¼Œ(2)åœ¨è®­ç»ƒä¸­å¯¹ç­–ç•¥rolloutè¿›è¡Œå®‰å…¨è¿‡æ»¤ã€‚ä»ç†è®ºä¸Šè®²ï¼Œæˆ‘ä»¬è¯æ˜äº†è¿ç»­æ—¶é—´å®‰å…¨æ»¤æ³¢å™¨å¯ä»¥é€šè¿‡ç¦»æ•£æ—¶é—´rolloutä¸Šçš„é—­å¼è¡¨è¾¾å¼è¿›è¡Œéƒ¨ç½²ã€‚åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬è¯æ˜äº†CBF-RLå°†å®‰å…¨çº¦æŸå†…åŒ–åˆ°å­¦ä¹ çš„ç­–ç•¥ä¸­â€”â€”æ—¢å¼ºåˆ¶æ‰§è¡Œæ›´å®‰å…¨çš„åŠ¨ä½œï¼Œåˆåå‘äºæ›´å®‰å…¨çš„å›æŠ¥â€”â€”ä»è€Œæ— éœ€åœ¨çº¿å®‰å…¨æ»¤æ³¢å™¨å³å¯å®ç°å®‰å…¨éƒ¨ç½²ã€‚æˆ‘ä»¬é€šè¿‡åœ¨å¯¼èˆªä»»åŠ¡å’ŒUnitree G1äººå½¢æœºå™¨äººä¸Šçš„æ¶ˆèç ”ç©¶éªŒè¯äº†æˆ‘ä»¬çš„æ¡†æ¶ï¼Œå…¶ä¸­CBF-RLå®ç°äº†æ›´å®‰å…¨çš„æ¢ç´¢ã€æ›´å¿«çš„æ”¶æ•›ä»¥åŠåœ¨ä¸ç¡®å®šæ€§ä¸‹çš„ç¨³å¥æ€§èƒ½ï¼Œä½¿äººå½¢æœºå™¨äººèƒ½å¤Ÿåœ¨æ²¡æœ‰è¿è¡Œæ—¶å®‰å…¨æ»¤æ³¢å™¨çš„æƒ…å†µä¸‹å®‰å…¨åœ°é¿å¼€éšœç¢ç‰©å¹¶å®‰å…¨åœ°çˆ¬æ¥¼æ¢¯ã€‚

## ğŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šå¼ºåŒ–å­¦ä¹ åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨æœºå™¨äººæ§åˆ¶ç­‰é¢†åŸŸï¼Œå®‰å…¨æ€§è‡³å…³é‡è¦ã€‚ä¼ ç»Ÿçš„å¼ºåŒ–å­¦ä¹ ç®—æ³•å¾€å¾€åªå…³æ³¨å¥–åŠ±æœ€å¤§åŒ–ï¼Œè€Œå¿½ç•¥äº†å®‰å…¨çº¦æŸï¼Œå¯èƒ½å¯¼è‡´æœºå™¨äººåšå‡ºå±é™©åŠ¨ä½œã€‚ç°æœ‰æ–¹æ³•é€šå¸¸é‡‡ç”¨åœ¨çº¿å®‰å…¨æ»¤æ³¢ï¼Œä½†è¿™ç§æ–¹å¼ä¼šé™åˆ¶ç­–ç•¥çš„æ¢ç´¢ï¼Œå¯¼è‡´ä¿å®ˆè¡Œä¸ºï¼Œä¸”RLç­–ç•¥æ— æ³•å­¦ä¹ åˆ°å†…åœ¨çš„å®‰å…¨æ„è¯†ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šCBF-RLçš„æ ¸å¿ƒæ€è·¯æ˜¯åœ¨å¼ºåŒ–å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œåˆ©ç”¨æ§åˆ¶å±éšœå‡½æ•°ï¼ˆCBFï¼‰æ¥å¼•å¯¼ç­–ç•¥çš„å­¦ä¹ ï¼Œä½¿å…¶åœ¨æ»¡è¶³å®‰å…¨çº¦æŸçš„å‰æä¸‹ï¼Œå°½å¯èƒ½åœ°ä¼˜åŒ–æ€§èƒ½ã€‚é€šè¿‡åœ¨è®­ç»ƒæ—¶å°±å°†å®‰å…¨çº¦æŸèå…¥ç­–ç•¥ï¼Œå¯ä»¥é¿å…åœ¨çº¿å®‰å…¨æ»¤æ³¢å¸¦æ¥çš„ä¿å®ˆæ€§é—®é¢˜ï¼Œå¹¶ä½¿ç­–ç•¥å…·å¤‡å†…åœ¨çš„å®‰å…¨æ„è¯†ã€‚

**æŠ€æœ¯æ¡†æ¶**ï¼šCBF-RLæ¡†æ¶ä¸»è¦åŒ…å«ä¸¤ä¸ªå…³é”®éƒ¨åˆ†ï¼šä¸€æ˜¯åŸºäºCBFçš„å®‰å…¨çº¦æŸé¡¹ï¼Œç”¨äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¯¹ç­–ç•¥è¿›è¡Œçº¦æŸï¼›äºŒæ˜¯å¯¹ç­–ç•¥rolloutè¿›è¡Œå®‰å…¨è¿‡æ»¤ï¼Œç¡®ä¿è®­ç»ƒæ•°æ®çš„å®‰å…¨æ€§ã€‚å…·ä½“æµç¨‹å¦‚ä¸‹ï¼šé¦–å…ˆï¼Œä½¿ç”¨ä¸€ä¸ªæ ‡ç§°çš„å¼ºåŒ–å­¦ä¹ ç®—æ³•ï¼ˆå¦‚PPOï¼‰ç”Ÿæˆç­–ç•¥ï¼›ç„¶åï¼Œåˆ©ç”¨CBFè®¡ç®—å®‰å…¨çº¦æŸé¡¹ï¼Œå¹¶å°†å…¶åŠ å…¥åˆ°å¼ºåŒ–å­¦ä¹ çš„æŸå¤±å‡½æ•°ä¸­ï¼›åŒæ—¶ï¼Œå¯¹ç­–ç•¥ç”Ÿæˆçš„rolloutè¿›è¡Œå®‰å…¨è¿‡æ»¤ï¼Œå»é™¤ä¸å®‰å…¨çš„è¡Œä¸ºï¼›æœ€åï¼Œåˆ©ç”¨ä¿®æ­£åçš„æ•°æ®æ›´æ–°ç­–ç•¥ã€‚

**å…³é”®åˆ›æ–°**ï¼šCBF-RLçš„å…³é”®åˆ›æ–°åœ¨äºå°†æ§åˆ¶å±éšœå‡½æ•°èå…¥åˆ°å¼ºåŒ–å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä»è€Œä½¿ç­–ç•¥èƒ½å¤Ÿå­¦ä¹ åˆ°å†…åœ¨çš„å®‰å…¨çº¦æŸã€‚ä¸ä¼ ç»Ÿçš„åœ¨çº¿å®‰å…¨æ»¤æ³¢æ–¹æ³•ç›¸æ¯”ï¼ŒCBF-RLé¿å…äº†ä¿å®ˆæ€§é—®é¢˜ï¼Œå¹¶æé«˜äº†ç­–ç•¥çš„æ¢ç´¢èƒ½åŠ›ã€‚æ­¤å¤–ï¼Œè®ºæ–‡è¿˜è¯æ˜äº†è¿ç»­æ—¶é—´å®‰å…¨æ»¤æ³¢å™¨å¯ä»¥é€šè¿‡ç¦»æ•£æ—¶é—´rolloutä¸Šçš„é—­å¼è¡¨è¾¾å¼è¿›è¡Œéƒ¨ç½²ï¼Œä¸ºå®é™…åº”ç”¨æä¾›äº†ç†è®ºåŸºç¡€ã€‚

**å…³é”®è®¾è®¡**ï¼šCBF-RLçš„å…³é”®è®¾è®¡åŒ…æ‹¬ï¼š(1) CBFçš„é€‰æ‹©ï¼šéœ€è¦æ ¹æ®å…·ä½“çš„ä»»åŠ¡å’Œå®‰å…¨çº¦æŸé€‰æ‹©åˆé€‚çš„CBFï¼›(2) å®‰å…¨çº¦æŸé¡¹çš„æƒé‡ï¼šéœ€è¦è°ƒæ•´å®‰å…¨çº¦æŸé¡¹åœ¨æŸå¤±å‡½æ•°ä¸­çš„æƒé‡ï¼Œä»¥å¹³è¡¡å®‰å…¨æ€§å’Œæ€§èƒ½ï¼›(3) å®‰å…¨è¿‡æ»¤çš„é˜ˆå€¼ï¼šéœ€è¦è®¾ç½®åˆé€‚çš„é˜ˆå€¼æ¥åˆ¤æ–­è¡Œä¸ºæ˜¯å¦å®‰å…¨ï¼›(4) ç­–ç•¥ç½‘ç»œç»“æ„ï¼šå¯ä»¥ä½¿ç”¨å„ç§å¸¸è§çš„å¼ºåŒ–å­¦ä¹ ç½‘ç»œç»“æ„ï¼Œå¦‚MLPæˆ–RNNã€‚

## ğŸ“Š å®éªŒäº®ç‚¹

å®éªŒç»“æœè¡¨æ˜ï¼ŒCBF-RLåœ¨å¯¼èˆªä»»åŠ¡å’ŒUnitree G1äººå½¢æœºå™¨äººä»»åŠ¡ä¸­å‡å–å¾—äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚åœ¨å¯¼èˆªä»»åŠ¡ä¸­ï¼ŒCBF-RLèƒ½å¤Ÿæ›´å¿«åœ°æ”¶æ•›åˆ°å®‰å…¨ç­–ç•¥ï¼Œå¹¶é¿å…ç¢°æ’ã€‚åœ¨äººå½¢æœºå™¨äººä»»åŠ¡ä¸­ï¼ŒCBF-RLä½¿æœºå™¨äººèƒ½å¤Ÿåœ¨æ²¡æœ‰è¿è¡Œæ—¶å®‰å…¨æ»¤æ³¢å™¨çš„æƒ…å†µä¸‹å®‰å…¨åœ°é¿å¼€éšœç¢ç‰©å¹¶å®‰å…¨åœ°çˆ¬æ¥¼æ¢¯ï¼Œè¯æ˜äº†å…¶åœ¨ä¸ç¡®å®šæ€§ä¸‹çš„é²æ£’æ€§ã€‚

## ğŸ¯ åº”ç”¨åœºæ™¯

CBF-RLæ¡†æ¶å¯å¹¿æ³›åº”ç”¨äºæœºå™¨äººæ§åˆ¶ã€è‡ªåŠ¨é©¾é©¶ã€æ— äººæœºç­‰å¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„é¢†åŸŸã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨äºè®­ç»ƒäººå½¢æœºå™¨äººå®‰å…¨åœ°è¡Œèµ°ã€é¿éšœå’Œçˆ¬æ¥¼æ¢¯ï¼Œæˆ–è€…è®­ç»ƒè‡ªåŠ¨é©¾é©¶æ±½è½¦å®‰å…¨åœ°è¡Œé©¶åœ¨å¤æ‚ç¯å¢ƒä¸­ã€‚è¯¥ç ”ç©¶æœ‰åŠ©äºæé«˜æ™ºèƒ½ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œå¯é æ€§ï¼Œä¿ƒè¿›å…¶åœ¨ç°å®ä¸–ç•Œä¸­çš„åº”ç”¨ã€‚

## ğŸ“„ æ‘˜è¦ï¼ˆåŸæ–‡ï¼‰

> Reinforcement learning (RL), while powerful and expressive, can often prioritize performance at the expense of safety. Yet safety violations can lead to catastrophic outcomes in real-world deployments. Control Barrier Functions (CBFs) offer a principled method to enforce dynamic safety -- traditionally deployed online via safety filters. While the result is safe behavior, the fact that the RL policy does not have knowledge of the CBF can lead to conservative behaviors. This paper proposes CBF-RL, a framework for generating safe behaviors with RL by enforcing CBFs in training. CBF-RL has two key attributes: (1) minimally modifying a nominal RL policy to encode safety constraints via a CBF term, (2) and safety filtering of the policy rollouts in training. Theoretically, we prove that continuous-time safety filters can be deployed via closed-form expressions on discrete-time roll-outs. Practically, we demonstrate that CBF-RL internalizes the safety constraints in the learned policy -- both enforcing safer actions and biasing towards safer rewards -- enabling safe deployment without the need for an online safety filter. We validate our framework through ablation studies on navigation tasks and on the Unitree G1 humanoid robot, where CBF-RL enables safer exploration, faster convergence, and robust performance under uncertainty, enabling the humanoid robot to avoid obstacles and climb stairs safely in real-world settings without a runtime safety filter.

