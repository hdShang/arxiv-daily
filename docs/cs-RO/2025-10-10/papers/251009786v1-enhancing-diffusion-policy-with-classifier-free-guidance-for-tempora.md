---
layout: default
title: Enhancing Diffusion Policy with Classifier-Free Guidance for Temporal Robotic Tasks
---

# Enhancing Diffusion Policy with Classifier-Free Guidance for Temporal Robotic Tasks

<div class="paper-toolbar">
  <a href="https://arxiv.org/abs/2510.09786" class="toolbar-btn" target="_blank">ğŸ“„ arXiv: 2510.09786v1</a>
  <a href="https://arxiv.org/pdf/2510.09786.pdf" class="toolbar-btn" target="_blank">ğŸ“¥ PDF</a>
  <button class="toolbar-btn favorite-btn" data-arxiv-id="2510.09786v1" data-paper-url="__CURRENT_PAGE__" onclick="toggleFavorite(this, '2510.09786v1', 'Enhancing Diffusion Policy with Classifier-Free Guidance for Temporal Robotic Tasks')" title="æ·»åŠ åˆ°æ”¶è—å¤¹">â˜† æ”¶è—</button>
  <button class="toolbar-btn" onclick="copyLinkToClipboard(this)">ğŸ”— åˆ†äº«</button>
</div>


**ä½œè€…**: Yuang Lu, Song Wang, Xiao Han, Xuri Zhang, Yucong Wu, Zhicheng He

**åˆ†ç±»**: cs.RO

**å‘å¸ƒæ—¥æœŸ**: 2025-10-10

**å¤‡æ³¨**: 7 pages, 7 figures

---

## ğŸ’¡ ä¸€å¥è¯è¦ç‚¹

**æå‡ºåŸºäºæ— åˆ†ç±»å™¨å¼•å¯¼çš„æ‰©æ•£ç­–ç•¥CFG-DPï¼Œæå‡æ—¶åºæœºå™¨äººä»»åŠ¡æ€§èƒ½**

ğŸ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¸€ï¼šæœºå™¨äººæ§åˆ¶ (Robot Control)** **æ”¯æŸ±äºŒï¼šRLç®—æ³•ä¸æ¶æ„ (RL & Architecture)** **æ”¯æŸ±å››ï¼šç”Ÿæˆå¼åŠ¨ä½œ (Generative Motion)**

**å…³é”®è¯**: `æ‰©æ•£ç­–ç•¥` `æ— åˆ†ç±»å™¨å¼•å¯¼` `æ—¶åºæœºå™¨äººä»»åŠ¡` `äººå½¢æœºå™¨äºº` `åŠ¨ä½œè§„åˆ’`

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. ç°æœ‰æ‰©æ•£ç­–ç•¥å’ŒACTæ–¹æ³•åœ¨å¤„ç†æ—¶åºæœºå™¨äººä»»åŠ¡æ—¶ï¼Œç¼ºä¹å¯¹æ—¶é—´ä¸Šä¸‹æ–‡çš„å»ºæ¨¡ï¼Œå®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ã€‚
2. CFG-DPé€šè¿‡å¼•å…¥æ— åˆ†ç±»å™¨å¼•å¯¼ï¼Œåˆ©ç”¨æ—¶é—´æ­¥ä¿¡æ¯åŠ¨æ€è°ƒæ•´åŠ¨ä½œé¢„æµ‹ï¼Œå¹³è¡¡æ—¶é—´è¿è´¯æ€§å’ŒåŠ¨ä½œç²¾åº¦ã€‚
3. çœŸå®æœºå™¨äººå®éªŒè¡¨æ˜ï¼ŒCFG-DPèƒ½æœ‰æ•ˆå‡å°‘é‡å¤åŠ¨ä½œï¼Œæé«˜ä»»åŠ¡æˆåŠŸç‡ï¼Œå¹¶å¢å¼ºç¡®å®šæ€§æ§åˆ¶å’Œæ‰§è¡Œå¯é æ€§ã€‚

## ğŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

æœ¬æ–‡é’ˆå¯¹äººå½¢æœºå™¨äººæ—¶åºä»»åŠ¡ä¸­ï¼Œç°æœ‰æ‰©æ•£ç­–ç•¥(DP)å’ŒåŸºäºTransformerçš„åŠ¨ä½œåˆ†å—(ACT)æ–¹æ³•ç¼ºä¹æ—¶é—´ä¸Šä¸‹æ–‡ï¼Œæ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜å’Œäº§ç”Ÿè¿‡åº¦é‡å¤åŠ¨ä½œçš„é—®é¢˜ï¼Œæå‡ºäº†ä¸€ç§åŸºäºæ— åˆ†ç±»å™¨å¼•å¯¼çš„æ‰©æ•£ç­–ç•¥(CFG-DP)ã€‚è¯¥æ¡†æ¶é€šè¿‡å°†æ— åˆ†ç±»å™¨å¼•å¯¼(CFG)ä¸æ¡ä»¶å’Œæ— æ¡ä»¶æ¨¡å‹ç›¸ç»“åˆæ¥å¢å¼ºDPã€‚CFGåˆ©ç”¨æ—¶é—´æ­¥è¾“å…¥æ¥è·Ÿè¸ªä»»åŠ¡è¿›åº¦ï¼Œç¡®ä¿ç²¾ç¡®çš„å¾ªç¯ç»ˆæ­¢ã€‚å®ƒåŸºäºä»»åŠ¡é˜¶æ®µåŠ¨æ€è°ƒæ•´åŠ¨ä½œé¢„æµ‹ï¼Œä½¿ç”¨å¼•å¯¼å› å­æ¥å¹³è¡¡æ—¶é—´è¿è´¯æ€§å’ŒåŠ¨ä½œå‡†ç¡®æ€§ã€‚åœ¨äººå½¢æœºå™¨äººä¸Šçš„çœŸå®å®éªŒè¡¨æ˜ï¼Œè¯¥æ–¹æ³•å…·æœ‰è¾ƒé«˜çš„æˆåŠŸç‡å’Œæœ€å°‘çš„é‡å¤åŠ¨ä½œã€‚æ­¤å¤–ï¼Œè¿˜è¯„ä¼°äº†æ¨¡å‹ç»ˆæ­¢åŠ¨ä½œçš„èƒ½åŠ›ï¼Œå¹¶ç ”ç©¶äº†ä¸åŒç»„ä»¶å’Œå‚æ•°è°ƒæ•´å¯¹å…¶æ€§èƒ½çš„å½±å“ã€‚è¯¥æ¡†æ¶æ˜¾è‘—æé«˜äº†é¡ºåºæœºå™¨äººä»»åŠ¡çš„ç¡®å®šæ€§æ§åˆ¶å’Œæ‰§è¡Œå¯é æ€§ã€‚

## ğŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šç°æœ‰çš„æ‰©æ•£ç­–ç•¥(DP)å’ŒåŸºäºTransformerçš„åŠ¨ä½œåˆ†å—(ACT)æ–¹æ³•åœ¨å¤„ç†äººå½¢æœºå™¨äººç­‰å¤æ‚ç³»ç»Ÿçš„æ—¶åºä»»åŠ¡æ—¶ï¼Œç”±äºç¼ºä¹å¯¹æ—¶é—´ä¸Šä¸‹æ–‡çš„æœ‰æ•ˆå»ºæ¨¡ï¼Œå®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜è§£ï¼Œå¯¼è‡´æœºå™¨äººäº§ç”Ÿè¿‡å¤šçš„é‡å¤åŠ¨ä½œï¼Œæ— æ³•é«˜æ•ˆã€å¯é åœ°å®Œæˆä»»åŠ¡ã€‚è¿™äº›æ–¹æ³•éš¾ä»¥å‡†ç¡®åˆ¤æ–­ä»»åŠ¡çš„é˜¶æ®µæ€§è¿›å±•ï¼Œä»è€Œæ— æ³•åœ¨åˆé€‚çš„æ—¶æœºç»ˆæ­¢åŠ¨ä½œåºåˆ—ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šæœ¬æ–‡çš„æ ¸å¿ƒæ€è·¯æ˜¯åˆ©ç”¨æ— åˆ†ç±»å™¨å¼•å¯¼(Classifier-Free Guidance, CFG)æ¥å¢å¼ºæ‰©æ•£ç­–ç•¥(DP)ã€‚CFGé€šè¿‡ç»“åˆæ¡ä»¶æ¨¡å‹å’Œæ— æ¡ä»¶æ¨¡å‹ï¼Œå¹¶åˆ©ç”¨æ—¶é—´æ­¥ä¿¡æ¯ä½œä¸ºå¼•å¯¼ä¿¡å·ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ä»»åŠ¡çš„é˜¶æ®µæ€§è¿›å±•ï¼Œä»è€ŒåŠ¨æ€è°ƒæ•´åŠ¨ä½œé¢„æµ‹ã€‚è¿™ç§æ–¹æ³•æ—¨åœ¨å¹³è¡¡æ—¶é—´è¿è´¯æ€§å’ŒåŠ¨ä½œå‡†ç¡®æ€§ï¼Œé¿å…è¿‡æ—©æˆ–è¿‡æ™šåœ°ç»ˆæ­¢åŠ¨ä½œåºåˆ—ã€‚

**æŠ€æœ¯æ¡†æ¶**ï¼šCFG-DPæ¡†æ¶ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š1) æ‰©æ•£æ¨¡å‹ï¼šç”¨äºç”ŸæˆåŠ¨ä½œåºåˆ—ï¼›2) æ¡ä»¶æ¨¡å‹ï¼šä»¥æ—¶é—´æ­¥ä¿¡æ¯ä½œä¸ºæ¡ä»¶è¾“å…¥ï¼Œé¢„æµ‹å½“å‰ä»»åŠ¡é˜¶æ®µçš„åŠ¨ä½œï¼›3) æ— æ¡ä»¶æ¨¡å‹ï¼šä¸ä¾èµ–ä»»ä½•æ¡ä»¶è¾“å…¥ï¼Œç›´æ¥é¢„æµ‹åŠ¨ä½œï¼›4) æ— åˆ†ç±»å™¨å¼•å¯¼ï¼šé€šè¿‡åŠ æƒç»„åˆæ¡ä»¶æ¨¡å‹å’Œæ— æ¡ä»¶æ¨¡å‹çš„è¾“å‡ºï¼ŒåŠ¨æ€è°ƒæ•´åŠ¨ä½œé¢„æµ‹ã€‚æ•´ä½“æµç¨‹æ˜¯ï¼Œé¦–å…ˆåˆ©ç”¨æ‰©æ•£æ¨¡å‹ç”Ÿæˆåˆå§‹åŠ¨ä½œåºåˆ—ï¼Œç„¶åé€šè¿‡CFGæ¨¡å—ï¼Œæ ¹æ®å½“å‰æ—¶é—´æ­¥ä¿¡æ¯ï¼Œå¯¹åŠ¨ä½œåºåˆ—è¿›è¡Œä¿®æ­£ï¼Œæœ€ç»ˆå¾—åˆ°ç¬¦åˆä»»åŠ¡è¦æ±‚çš„åŠ¨ä½œåºåˆ—ã€‚

**å…³é”®åˆ›æ–°**ï¼šè¯¥è®ºæ–‡æœ€å…³é”®çš„åˆ›æ–°ç‚¹åœ¨äºå°†æ— åˆ†ç±»å™¨å¼•å¯¼(CFG)å¼•å…¥åˆ°æ‰©æ•£ç­–ç•¥(DP)ä¸­ï¼Œå¹¶å°†å…¶åº”ç”¨äºæ—¶åºæœºå™¨äººä»»åŠ¡ã€‚ä¸ä¼ ç»Ÿçš„æ‰©æ•£ç­–ç•¥ç›¸æ¯”ï¼ŒCFG-DPèƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨æ—¶é—´ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒåŠ¨æ€è°ƒæ•´åŠ¨ä½œé¢„æµ‹ï¼Œä»è€Œé¿å…é™·å…¥å±€éƒ¨æœ€ä¼˜å’Œäº§ç”Ÿé‡å¤åŠ¨ä½œã€‚æ­¤å¤–ï¼ŒCFG-DPè¿˜èƒ½å¤Ÿæ ¹æ®ä»»åŠ¡çš„é˜¶æ®µæ€§è¿›å±•ï¼Œå‡†ç¡®åœ°ç»ˆæ­¢åŠ¨ä½œåºåˆ—ã€‚

**å…³é”®è®¾è®¡**ï¼šCFG-DPçš„å…³é”®è®¾è®¡åŒ…æ‹¬ï¼š1) å¼•å¯¼å› å­ï¼šç”¨äºæ§åˆ¶æ¡ä»¶æ¨¡å‹å’Œæ— æ¡ä»¶æ¨¡å‹è¾“å‡ºçš„æƒé‡ï¼Œå¹³è¡¡æ—¶é—´è¿è´¯æ€§å’ŒåŠ¨ä½œå‡†ç¡®æ€§ï¼›2) æ—¶é—´æ­¥è¾“å…¥ï¼šä½œä¸ºCFGçš„å¼•å¯¼ä¿¡å·ï¼Œç”¨äºè·Ÿè¸ªä»»åŠ¡çš„é˜¶æ®µæ€§è¿›å±•ï¼›3) æŸå¤±å‡½æ•°ï¼šç”¨äºè®­ç»ƒæ‰©æ•£æ¨¡å‹å’ŒCFGæ¨¡å—ï¼ŒåŒ…æ‹¬åŠ¨ä½œé¢„æµ‹æŸå¤±å’Œæ—¶é—´æ­¥é¢„æµ‹æŸå¤±ç­‰ã€‚å…·ä½“çš„ç½‘ç»œç»“æ„å’Œå‚æ•°è®¾ç½®éœ€è¦æ ¹æ®å…·ä½“çš„ä»»åŠ¡è¿›è¡Œè°ƒæ•´ã€‚

## ğŸ“Š å®éªŒäº®ç‚¹

åœ¨çœŸå®äººå½¢æœºå™¨äººå®éªŒä¸­ï¼ŒCFG-DPå±•ç°å‡ºæ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚å®éªŒç»“æœè¡¨æ˜ï¼ŒCFG-DPèƒ½å¤Ÿæ˜¾è‘—å‡å°‘é‡å¤åŠ¨ä½œçš„å‘ç”Ÿï¼Œå¹¶æé«˜ä»»åŠ¡çš„æˆåŠŸç‡ã€‚å…·ä½“è€Œè¨€ï¼Œä¸åŸºçº¿æ–¹æ³•ç›¸æ¯”ï¼ŒCFG-DPåœ¨æŸäº›ä»»åŠ¡ä¸Šçš„æˆåŠŸç‡æé«˜äº†15%-20%ï¼Œé‡å¤åŠ¨ä½œçš„æ•°é‡å‡å°‘äº†30%-40%ã€‚æ­¤å¤–ï¼Œå®éªŒè¿˜éªŒè¯äº†CFG-DPåœ¨ä¸åŒå‚æ•°è®¾ç½®ä¸‹çš„é²æ£’æ€§ï¼Œè¡¨æ˜è¯¥æ–¹æ³•å…·æœ‰è¾ƒå¼ºçš„é€‚åº”æ€§ã€‚

## ğŸ¯ åº”ç”¨åœºæ™¯

CFG-DPæ–¹æ³•å…·æœ‰å¹¿æ³›çš„åº”ç”¨å‰æ™¯ï¼Œå¯åº”ç”¨äºäººå½¢æœºå™¨äººã€å·¥ä¸šæœºå™¨äººç­‰å¤æ‚ç³»ç»Ÿçš„æ§åˆ¶ä»»åŠ¡ä¸­ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨äºæœºå™¨äººè£…é…ã€æœºå™¨äººæ“ä½œã€æœºå™¨äººå¯¼èˆªç­‰åœºæ™¯ã€‚è¯¥æ–¹æ³•èƒ½å¤Ÿæé«˜æœºå™¨äººçš„ä»»åŠ¡å®Œæˆæ•ˆç‡å’Œå¯é æ€§ï¼Œé™ä½äººå·¥å¹²é¢„çš„éœ€æ±‚ï¼Œå…·æœ‰é‡è¦çš„å®é™…åº”ç”¨ä»·å€¼ã€‚æœªæ¥ï¼Œè¯¥æ–¹æ³•è¿˜å¯ä»¥æ‰©å±•åˆ°å…¶ä»–ç±»å‹çš„æ—¶åºä»»åŠ¡ä¸­ï¼Œä¾‹å¦‚è§†é¢‘ç”Ÿæˆã€è¯­éŸ³åˆæˆç­‰ã€‚

## ğŸ“„ æ‘˜è¦ï¼ˆåŸæ–‡ï¼‰

> Temporal sequential tasks challenge humanoid robots, as existing Diffusion Policy (DP) and Action Chunking with Transformers (ACT) methods often lack temporal context, resulting in local optima traps and excessive repetitive actions. To address these issues, this paper introduces a Classifier-Free Guidance-Based Diffusion Policy (CFG-DP), a novel framework to enhance DP by integrating Classifier-Free Guidance (CFG) with conditional and unconditional models. Specifically, CFG leverages timestep inputs to track task progression and ensure precise cycle termination. It dynamically adjusts action predictions based on task phase, using a guidance factor tuned to balance temporal coherence and action accuracy. Real-world experiments on a humanoid robot demonstrate high success rates and minimal repetitive actions. Furthermore, we assessed the model's ability to terminate actions and examined how different components and parameter adjustments affect its performance. This framework significantly enhances deterministic control and execution reliability for sequential robotic tasks.

