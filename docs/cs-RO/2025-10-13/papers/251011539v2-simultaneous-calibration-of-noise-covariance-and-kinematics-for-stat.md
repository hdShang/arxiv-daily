---
layout: default
title: Simultaneous Calibration of Noise Covariance and Kinematics for State Estimation of Legged Robots via Bi-level Optimization
---

# Simultaneous Calibration of Noise Covariance and Kinematics for State Estimation of Legged Robots via Bi-level Optimization

<div class="paper-toolbar">
  <a href="https://arxiv.org/abs/2510.11539" class="toolbar-btn" target="_blank">ğŸ“„ arXiv: 2510.11539v2</a>
  <a href="https://arxiv.org/pdf/2510.11539.pdf" class="toolbar-btn" target="_blank">ğŸ“¥ PDF</a>
  <button class="toolbar-btn favorite-btn" data-arxiv-id="2510.11539v2" data-paper-url="__CURRENT_PAGE__" onclick="toggleFavorite(this, '2510.11539v2', 'Simultaneous Calibration of Noise Covariance and Kinematics for State Estimation of Legged Robots via Bi-level Optimization')" title="æ·»åŠ åˆ°æ”¶è—å¤¹">â˜† æ”¶è—</button>
  <button class="toolbar-btn" onclick="copyLinkToClipboard(this)">ğŸ”— åˆ†äº«</button>
</div>


**ä½œè€…**: Denglin Cheng, Jiarong Kang, Xiaobin Xiong

**åˆ†ç±»**: cs.RO, math.OC

**å‘å¸ƒæ—¥æœŸ**: 2025-10-13 (æ›´æ–°: 2025-11-26)

---

## ğŸ’¡ ä¸€å¥è¯è¦ç‚¹

**æå‡ºåŒå±‚ä¼˜åŒ–æ¡†æ¶ï¼ŒåŒæ­¥æ ‡å®šè…¿å¼æœºå™¨äººçŠ¶æ€ä¼°è®¡ä¸­çš„å™ªå£°åæ–¹å·®ä¸è¿åŠ¨å­¦å‚æ•°**

ğŸ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¸€ï¼šæœºå™¨äººæ§åˆ¶ (Robot Control)**

**å…³é”®è¯**: `çŠ¶æ€ä¼°è®¡` `å™ªå£°åæ–¹å·®æ ‡å®š` `è¿åŠ¨å­¦æ ‡å®š` `åŒå±‚ä¼˜åŒ–` `è…¿å¼æœºå™¨äºº`

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. è…¿å¼æœºå™¨äººåœ¨å¤æ‚ç¯å¢ƒä¸­ç²¾ç¡®çŠ¶æ€ä¼°è®¡é¢ä¸´å™ªå£°åæ–¹å·®å’Œè¿åŠ¨å­¦å‚æ•°æœªçŸ¥æˆ–æ‰‹åŠ¨è°ƒæ•´çš„éš¾é¢˜ã€‚
2. è®ºæ–‡æå‡ºåŒå±‚ä¼˜åŒ–æ¡†æ¶ï¼Œä¸Šå±‚ä¼˜åŒ–å™ªå£°åæ–¹å·®å’Œæ¨¡å‹å‚æ•°ï¼Œä¸‹å±‚æ‰§è¡Œå…¨ä¿¡æ¯ä¼°è®¡å™¨ï¼Œå®ç°è½¨è¿¹çº§ä¼˜åŒ–ã€‚
3. å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥æ–¹æ³•åœ¨å››è¶³å’Œäººå½¢æœºå™¨äººä¸Šæ˜¾è‘—æé«˜äº†çŠ¶æ€ä¼°è®¡ç²¾åº¦å’Œä¸ç¡®å®šæ€§æ ‡å®šï¼Œä¼˜äºæ‰‹åŠ¨è°ƒæ•´çš„åŸºçº¿ã€‚

## ğŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

ç²¾ç¡®çš„çŠ¶æ€ä¼°è®¡å¯¹äºåœ¨åŠ¨æ€ã€ä¸ç¡®å®šç¯å¢ƒä¸­è¿è¡Œçš„è…¿å¼å’Œç©ºä¸­æœºå™¨äººè‡³å…³é‡è¦ã€‚ä¸€ä¸ªå…³é”®æŒ‘æˆ˜åœ¨äºæŒ‡å®šè¿‡ç¨‹å’Œæµ‹é‡å™ªå£°åæ–¹å·®ï¼Œè¿™äº›åæ–¹å·®é€šå¸¸æ˜¯æœªçŸ¥çš„æˆ–æ‰‹åŠ¨è°ƒæ•´çš„ã€‚æœ¬æ–‡æå‡ºäº†ä¸€ç§åŒå±‚ä¼˜åŒ–æ¡†æ¶ï¼Œä»¥estimator-in-the-loopçš„æ–¹å¼è”åˆæ ‡å®šåæ–¹å·®çŸ©é˜µå’Œè¿åŠ¨å­¦å‚æ•°ã€‚ä¸Šå±‚å°†å™ªå£°åæ–¹å·®å’Œæ¨¡å‹å‚æ•°ä½œä¸ºä¼˜åŒ–å˜é‡ï¼Œè€Œä¸‹å±‚æ‰§è¡Œå…¨ä¿¡æ¯ä¼°è®¡å™¨ã€‚é€šè¿‡ä¼°è®¡å™¨è¿›è¡Œå¾®åˆ†å…è®¸ç›´æ¥ä¼˜åŒ–è½¨è¿¹çº§ç›®æ ‡ï¼Œä»è€Œäº§ç”Ÿå‡†ç¡®å’Œä¸€è‡´çš„çŠ¶æ€ä¼°è®¡ã€‚æˆ‘ä»¬åœ¨å››è¶³å’Œäººå½¢æœºå™¨äººä¸ŠéªŒè¯äº†æˆ‘ä»¬çš„æ–¹æ³•ï¼Œä¸æ‰‹åŠ¨è°ƒæ•´çš„åŸºçº¿ç›¸æ¯”ï¼Œè¯æ˜äº†æ˜¾è‘—æé«˜çš„ä¼°è®¡ç²¾åº¦å’Œä¸ç¡®å®šæ€§æ ‡å®šã€‚æˆ‘ä»¬çš„æ–¹æ³•å°†çŠ¶æ€ä¼°è®¡ã€ä¼ æ„Ÿå™¨å’Œè¿åŠ¨å­¦æ ‡å®šç»Ÿä¸€åˆ°ä¸€ä¸ªåŸåˆ™æ€§çš„ã€æ•°æ®é©±åŠ¨çš„æ¡†æ¶ä¸­ï¼Œé€‚ç”¨äºå„ç§æœºå™¨äººå¹³å°ã€‚

## ğŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šè…¿å¼æœºå™¨äººåœ¨åŠ¨æ€ç¯å¢ƒä¸­è¿›è¡ŒçŠ¶æ€ä¼°è®¡æ—¶ï¼Œè¿‡ç¨‹å™ªå£°å’Œæµ‹é‡å™ªå£°çš„åæ–¹å·®çŸ©é˜µé€šå¸¸æ˜¯æœªçŸ¥çš„ï¼Œæˆ–è€…éœ€è¦æ‰‹åŠ¨è°ƒæ•´ã€‚æ‰‹åŠ¨è°ƒæ•´éå¸¸è€—æ—¶ä¸”éš¾ä»¥ä¿è¯æœ€ä¼˜æ€§èƒ½ã€‚æ­¤å¤–ï¼Œæœºå™¨äººè¿åŠ¨å­¦å‚æ•°çš„ä¸å‡†ç¡®ä¹Ÿä¼šå½±å“çŠ¶æ€ä¼°è®¡çš„ç²¾åº¦ã€‚å› æ­¤ï¼Œéœ€è¦ä¸€ç§è‡ªåŠ¨åŒ–çš„æ–¹æ³•æ¥åŒæ—¶æ ‡å®šå™ªå£°åæ–¹å·®å’Œè¿åŠ¨å­¦å‚æ•°ï¼Œä»¥æé«˜çŠ¶æ€ä¼°è®¡çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šè®ºæ–‡çš„æ ¸å¿ƒæ€è·¯æ˜¯å°†å™ªå£°åæ–¹å·®å’Œè¿åŠ¨å­¦å‚æ•°çš„æ ‡å®šé—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªåŒå±‚ä¼˜åŒ–é—®é¢˜ã€‚ä¸Šå±‚ä¼˜åŒ–ç›®æ ‡æ˜¯æé«˜çŠ¶æ€ä¼°è®¡çš„ç²¾åº¦ï¼Œé€šè¿‡è°ƒæ•´å™ªå£°åæ–¹å·®å’Œè¿åŠ¨å­¦å‚æ•°æ¥å®ç°ã€‚ä¸‹å±‚ä¼˜åŒ–ç›®æ ‡æ˜¯æ‰§è¡Œä¸€ä¸ªå…¨ä¿¡æ¯ä¼°è®¡å™¨ï¼Œåˆ©ç”¨å½“å‰çš„å™ªå£°åæ–¹å·®å’Œè¿åŠ¨å­¦å‚æ•°è¿›è¡ŒçŠ¶æ€ä¼°è®¡ã€‚é€šè¿‡åœ¨ä¼°è®¡å™¨ä¸­è¿›è¡Œå¾®åˆ†ï¼Œå¯ä»¥å°†è½¨è¿¹çº§ç›®æ ‡ç›´æ¥ç”¨äºä¼˜åŒ–ï¼Œä»è€Œå®ç°æ›´å‡†ç¡®å’Œä¸€è‡´çš„çŠ¶æ€ä¼°è®¡ã€‚

**æŠ€æœ¯æ¡†æ¶**ï¼šè¯¥æ–¹æ³•é‡‡ç”¨åŒå±‚ä¼˜åŒ–æ¡†æ¶ã€‚ä¸Šå±‚ä¼˜åŒ–å™¨è´Ÿè´£è°ƒæ•´å™ªå£°åæ–¹å·®çŸ©é˜µå’Œè¿åŠ¨å­¦å‚æ•°ã€‚ä¸‹å±‚æ˜¯ä¸€ä¸ªå…¨ä¿¡æ¯ä¼°è®¡å™¨ï¼Œä¾‹å¦‚æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆEKFï¼‰æˆ–å› å­å›¾ä¼˜åŒ–å™¨ã€‚ä¸Šå±‚ä¼˜åŒ–å™¨é€šè¿‡ä¸‹å±‚ä¼°è®¡å™¨æä¾›çš„çŠ¶æ€ä¼°è®¡ç»“æœæ¥è¯„ä¼°å½“å‰å‚æ•°çš„æ€§èƒ½ã€‚ä¸ºäº†å®ç°æ¢¯åº¦ä¼˜åŒ–ï¼Œéœ€è¦å¯¹ä¸‹å±‚ä¼°è®¡å™¨è¿›è¡Œå¾®åˆ†ï¼Œä»¥ä¾¿å°†ä¸Šå±‚ä¼˜åŒ–å™¨çš„æ¢¯åº¦ä¿¡æ¯ä¼ é€’åˆ°ä¸‹å±‚ã€‚

**å…³é”®åˆ›æ–°**ï¼šè¯¥æ–¹æ³•æœ€é‡è¦çš„åˆ›æ–°ç‚¹åœ¨äºæå‡ºäº†ä¸€ä¸ªåŒå±‚ä¼˜åŒ–æ¡†æ¶ï¼Œèƒ½å¤ŸåŒæ—¶æ ‡å®šå™ªå£°åæ–¹å·®çŸ©é˜µå’Œè¿åŠ¨å­¦å‚æ•°ã€‚ä¸ä¼ ç»Ÿçš„å…ˆæ ‡å®šè¿åŠ¨å­¦å‚æ•°å†æ‰‹åŠ¨è°ƒæ•´å™ªå£°åæ–¹å·®çš„æ–¹æ³•ç›¸æ¯”ï¼Œè¯¥æ–¹æ³•èƒ½å¤Ÿå®ç°æ›´å‡†ç¡®å’Œä¸€è‡´çš„çŠ¶æ€ä¼°è®¡ã€‚æ­¤å¤–ï¼Œé€šè¿‡åœ¨ä¼°è®¡å™¨ä¸­è¿›è¡Œå¾®åˆ†ï¼Œå¯ä»¥ç›´æ¥ä¼˜åŒ–è½¨è¿¹çº§ç›®æ ‡ï¼Œä»è€Œæé«˜ä¼˜åŒ–æ•ˆç‡å’Œç²¾åº¦ã€‚

**å…³é”®è®¾è®¡**ï¼šå…³é”®è®¾è®¡åŒ…æ‹¬ï¼š1) å™ªå£°åæ–¹å·®çŸ©é˜µçš„å‚æ•°åŒ–æ–¹å¼ï¼Œä¾‹å¦‚ä½¿ç”¨å¯¹æ•°ç©ºé—´è¡¨ç¤ºä»¥ä¿è¯æ­£å®šæ€§ï¼›2) è¿åŠ¨å­¦å‚æ•°çš„è¡¨ç¤ºæ–¹å¼ï¼Œä¾‹å¦‚ä½¿ç”¨Denavit-Hartenberg (DH) å‚æ•°ï¼›3) ä¸Šå±‚ä¼˜åŒ–å™¨çš„é€‰æ‹©ï¼Œä¾‹å¦‚ä½¿ç”¨Adamæˆ–L-BFGSï¼›4) ä¸‹å±‚ä¼°è®¡å™¨çš„é€‰æ‹©ï¼Œä¾‹å¦‚ä½¿ç”¨æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆEKFï¼‰æˆ–å› å­å›¾ä¼˜åŒ–å™¨ï¼›5) æŸå¤±å‡½æ•°çš„é€‰æ‹©ï¼Œä¾‹å¦‚ä½¿ç”¨çŠ¶æ€ä¼°è®¡è¯¯å·®çš„å¹³æ–¹å’Œã€‚

## ğŸ“Š å®éªŒäº®ç‚¹

å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥æ–¹æ³•åœ¨å››è¶³å’Œäººå½¢æœºå™¨äººä¸Šæ˜¾è‘—æé«˜äº†çŠ¶æ€ä¼°è®¡çš„ç²¾åº¦å’Œä¸ç¡®å®šæ€§æ ‡å®šã€‚ä¸æ‰‹åŠ¨è°ƒæ•´çš„åŸºçº¿ç›¸æ¯”ï¼Œè¯¥æ–¹æ³•èƒ½å¤Ÿå°†çŠ¶æ€ä¼°è®¡è¯¯å·®é™ä½æ˜¾è‘—æ¯”ä¾‹ï¼ˆå…·ä½“æ•°å€¼æœªç»™å‡ºï¼ŒåŸæ–‡ä¸ºâ€œsignificantly improvedâ€ï¼‰ï¼Œå¹¶èƒ½å¤Ÿæ›´å‡†ç¡®åœ°ä¼°è®¡çŠ¶æ€çš„ä¸ç¡®å®šæ€§ã€‚è¿™äº›ç»“æœéªŒè¯äº†è¯¥æ–¹æ³•çš„æœ‰æ•ˆæ€§å’Œä¼˜è¶Šæ€§ã€‚

## ğŸ¯ åº”ç”¨åœºæ™¯

è¯¥ç ”ç©¶æˆæœå¯å¹¿æ³›åº”ç”¨äºè…¿å¼æœºå™¨äººï¼ŒåŒ…æ‹¬å››è¶³æœºå™¨äººå’Œäººå½¢æœºå™¨äººï¼Œåœ¨åŠ¨æ€å’Œä¸ç¡®å®šç¯å¢ƒä¸­è¿›è¡Œå¯¼èˆªã€æ“ä½œå’Œæ§åˆ¶ã€‚é€šè¿‡è‡ªåŠ¨æ ‡å®šå™ªå£°åæ–¹å·®å’Œè¿åŠ¨å­¦å‚æ•°ï¼Œå¯ä»¥æé«˜æœºå™¨äººçš„è‡ªä¸»æ€§å’Œé²æ£’æ€§ï¼Œé™ä½äººå·¥å¹²é¢„çš„éœ€æ±‚ã€‚æ­¤å¤–ï¼Œè¯¥æ–¹æ³•è¿˜å¯ä»¥æ¨å¹¿åˆ°å…¶ä»–ç±»å‹çš„æœºå™¨äººï¼Œä¾‹å¦‚ç©ºä¸­æœºå™¨äººå’Œæ°´ä¸‹æœºå™¨äººï¼Œå…·æœ‰é‡è¦çš„å®é™…åº”ç”¨ä»·å€¼å’Œæœªæ¥å‘å±•æ½œåŠ›ã€‚

## ğŸ“„ æ‘˜è¦ï¼ˆåŸæ–‡ï¼‰

> Accurate state estimation is critical for legged and aerial robots operating in dynamic, uncertain environments. A key challenge lies in specifying process and measurement noise covariances, which are typically unknown or manually tuned. In this work, we introduce a bi-level optimization framework that jointly calibrates covariance matrices and kinematic parameters in an estimator-in-the-loop manner. The upper level treats noise covariances and model parameters as optimization variables, while the lower level executes a full-information estimator. Differentiating through the estimator allows direct optimization of trajectory-level objectives, resulting in accurate and consistent state estimates. We validate our approach on quadrupedal and humanoid robots, demonstrating significantly improved estimation accuracy and uncertainty calibration compared to hand-tuned baselines. Our method unifies state estimation, sensor, and kinematics calibration into a principled, data-driven framework applicable across diverse robotic platforms.

