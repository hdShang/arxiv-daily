---
layout: default
title: Step-Wise Formal Verification for LLM-Based Mathematical Problem Solving
---

# Step-Wise Formal Verification for LLM-Based Mathematical Problem Solving

<div class="paper-toolbar">
  <a href="https://arxiv.org/abs/2505.20869" class="toolbar-btn" target="_blank">ğŸ“„ arXiv: 2505.20869v1</a>
  <a href="https://arxiv.org/pdf/2505.20869.pdf" class="toolbar-btn" target="_blank">ğŸ“¥ PDF</a>
  <button class="toolbar-btn favorite-btn" data-arxiv-id="2505.20869v1" data-paper-url="__CURRENT_PAGE__" onclick="toggleFavorite(this, '2505.20869v1', 'Step-Wise Formal Verification for LLM-Based Mathematical Problem Solving')" title="æ·»åŠ åˆ°æ”¶è—å¤¹">â˜† æ”¶è—</button>
  <button class="toolbar-btn" onclick="copyLinkToClipboard(this)">ğŸ”— åˆ†äº«</button>
</div>


**ä½œè€…**: Kuo Zhou, Lu Zhang

**åˆ†ç±»**: cs.AI

**å‘å¸ƒæ—¥æœŸ**: 2025-05-27

---

## ğŸ’¡ ä¸€å¥è¯è¦ç‚¹

**æå‡ºMATH-VFæ¡†æ¶ä»¥è§£å†³LLMæ•°å­¦é—®é¢˜æ±‚è§£çš„éªŒè¯é—®é¢˜**

ğŸ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¹ï¼šå…·èº«å¤§æ¨¡å‹ (Embodied Foundation Models)**

**å…³é”®è¯**: `å¤§å‹è¯­è¨€æ¨¡å‹` `æ•°å­¦é—®é¢˜æ±‚è§£` `å½¢å¼åŒ–éªŒè¯` `è®¡ç®—æœºä»£æ•°ç³»ç»Ÿ` `SMTæ±‚è§£å™¨` `é”™è¯¯ä¿®æ­£` `æ¡†æ¶è®¾è®¡`

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. ç°æœ‰çš„å¤§å‹è¯­è¨€æ¨¡å‹åœ¨æ•°å­¦é—®é¢˜æ±‚è§£ä¸­å­˜åœ¨é€»è¾‘æ¨ç†å’Œè®¡ç®—é”™è¯¯ï¼Œå¯¼è‡´ç»“æœä¸å¯é ã€‚
2. æœ¬æ–‡æå‡ºçš„MATH-VFæ¡†æ¶é€šè¿‡å½¢å¼åŒ–å™¨å’Œæ‰¹è¯„å™¨çš„ç»“åˆï¼Œæä¾›äº†ä¸€ç§ç³»ç»ŸåŒ–çš„è§£å†³æ–¹æ¡ˆæ¥éªŒè¯å’Œæ”¹è¿›LLMç”Ÿæˆçš„æ•°å­¦è§£ç­”ã€‚
3. åœ¨MATH500å’ŒProcessBenchåŸºå‡†ä¸Šè¿›è¡Œçš„å®éªŒè¡¨æ˜ï¼ŒMATH-VFåœ¨è§£å†³æ–¹æ¡ˆçš„æ­£ç¡®æ€§éªŒè¯å’Œé”™è¯¯ä¿®æ­£æ–¹é¢æ˜¾è‘—ä¼˜äºç°æœ‰æ–¹æ³•ã€‚

## ğŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰åœ¨è§£å†³æ•°å­¦é—®é¢˜æ–¹é¢å±•ç°äº†å¼ºå¤§çš„èƒ½åŠ›ï¼Œä½†åœ¨æ±‚è§£è¿‡ç¨‹ä¸­ä»å¯èƒ½å‡ºç°é€»è¾‘æ¨ç†å’Œè®¡ç®—é”™è¯¯ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ä¸ªåä¸ºMATH-VFçš„æ¡†æ¶ï¼Œè¯¥æ¡†æ¶åŒ…æ‹¬ä¸€ä¸ªå½¢å¼åŒ–å™¨å’Œä¸€ä¸ªæ‰¹è¯„å™¨ï¼Œç”¨äºæ­£å¼éªŒè¯å¤§å‹è¯­è¨€æ¨¡å‹ç”Ÿæˆçš„è§£å†³æ–¹æ¡ˆçš„æ­£ç¡®æ€§ã€‚è¯¥æ¡†æ¶é¦–å…ˆåˆ©ç”¨å½¢å¼åŒ–å™¨å°†è‡ªç„¶è¯­è¨€è§£å†³æ–¹æ¡ˆç¿»è¯‘ä¸ºæ­£å¼ä¸Šä¸‹æ–‡ï¼Œéšåæ‰¹è¯„å™¨æ•´åˆäº†è®¡ç®—æœºä»£æ•°ç³»ç»Ÿå’ŒSMTæ±‚è§£å™¨ç­‰å¤–éƒ¨å·¥å…·ï¼Œè¯„ä¼°æ­£å¼ä¸Šä¸‹æ–‡ä¸­æ¯ä¸ªè¯­å¥çš„æ­£ç¡®æ€§ï¼Œå¹¶åœ¨å‘ç°é”™è¯¯æ—¶æä¾›çº æ­£åé¦ˆã€‚æˆ‘ä»¬åœ¨ä¸¤ä¸ªåœºæ™¯ä¸­å®è¯ç ”ç©¶äº†MATH-VFçš„æœ‰æ•ˆæ€§ï¼š1ï¼‰éªŒè¯ï¼šMATH-VFç”¨äºç¡®å®šç»™å®šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆçš„æ­£ç¡®æ€§ï¼›2ï¼‰ç²¾ç‚¼ï¼šå½“MATH-VFè¯†åˆ«å‡ºLLMç”Ÿæˆçš„è§£å†³æ–¹æ¡ˆä¸­çš„é”™è¯¯æ—¶ï¼Œæ‰¹è¯„å™¨æå‡ºçš„çº æ­£å»ºè®®å°†æäº¤ç»™è§£å†³æ–¹æ¡ˆç”Ÿæˆå™¨ä»¥é‡æ–°ç”Ÿæˆè§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬åœ¨å¹¿æ³›ä½¿ç”¨çš„æ•°å­¦åŸºå‡†MATH500å’ŒProcessBenchä¸Šè¯„ä¼°äº†æˆ‘ä»¬çš„æ¡†æ¶ï¼Œå±•ç¤ºäº†å…¶ä¼˜è¶Šæ€§ã€‚

## ğŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šæœ¬æ–‡æ—¨åœ¨è§£å†³å¤§å‹è¯­è¨€æ¨¡å‹åœ¨æ•°å­¦é—®é¢˜æ±‚è§£ä¸­å¯èƒ½å‡ºç°çš„é€»è¾‘å’Œè®¡ç®—é”™è¯¯ï¼Œç°æœ‰æ–¹æ³•ç¼ºä¹æœ‰æ•ˆçš„éªŒè¯æœºåˆ¶ï¼Œå¯¼è‡´ç”Ÿæˆçš„è§£ç­”ä¸å¤Ÿå¯é ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šMATH-VFæ¡†æ¶é€šè¿‡å°†è‡ªç„¶è¯­è¨€è§£å†³æ–¹æ¡ˆè½¬åŒ–ä¸ºæ­£å¼ä¸Šä¸‹æ–‡ï¼Œå¹¶åˆ©ç”¨æ‰¹è¯„å™¨å¯¹æ¯ä¸ªè¯­å¥è¿›è¡ŒéªŒè¯ï¼Œæä¾›äº†ä¸€ä¸ªç³»ç»ŸåŒ–çš„éªŒè¯å’Œåé¦ˆæœºåˆ¶ï¼Œä»¥æé«˜è§£ç­”çš„å‡†ç¡®æ€§ã€‚

**æŠ€æœ¯æ¡†æ¶**ï¼šMATH-VFæ¡†æ¶ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ¨¡å—ï¼šå½¢å¼åŒ–å™¨å’Œæ‰¹è¯„å™¨ã€‚å½¢å¼åŒ–å™¨è´Ÿè´£å°†è‡ªç„¶è¯­è¨€è§£ç­”è½¬åŒ–ä¸ºå½¢å¼åŒ–çš„æ•°å­¦è¡¨è¾¾ï¼Œæ‰¹è¯„å™¨åˆ™åˆ©ç”¨å¤–éƒ¨å·¥å…·ï¼ˆå¦‚è®¡ç®—æœºä»£æ•°ç³»ç»Ÿå’ŒSMTæ±‚è§£å™¨ï¼‰å¯¹è¿™äº›è¡¨è¾¾è¿›è¡ŒéªŒè¯å’Œçº é”™ã€‚

**å…³é”®åˆ›æ–°**ï¼šMATH-VFçš„åˆ›æ–°ä¹‹å¤„åœ¨äºå…¶ç»“åˆäº†LLMä¸å¤–éƒ¨éªŒè¯å·¥å…·çš„èƒ½åŠ›ï¼Œå½¢æˆäº†ä¸€ç§æ–°çš„éªŒè¯æœºåˆ¶ï¼Œèƒ½å¤Ÿåœ¨å‘ç°é”™è¯¯æ—¶æä¾›å³æ—¶åé¦ˆï¼Œä¸ä¼ ç»Ÿæ–¹æ³•ç›¸æ¯”ï¼Œæ˜¾è‘—æå‡äº†æ•°å­¦é—®é¢˜æ±‚è§£çš„å‡†ç¡®æ€§ã€‚

**å…³é”®è®¾è®¡**ï¼šåœ¨è®¾è®¡ä¸Šï¼Œå½¢å¼åŒ–å™¨é‡‡ç”¨äº†ç‰¹å®šçš„è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å‹è¿›è¡Œç¿»è¯‘ï¼Œæ‰¹è¯„å™¨åˆ™é›†æˆäº†å¤šç§éªŒè¯å·¥å…·ï¼Œç¡®ä¿å¯¹æ¯ä¸ªè¯­å¥çš„å…¨é¢è¯„ä¼°ã€‚æ­¤å¤–ï¼Œæ¡†æ¶çš„åé¦ˆæœºåˆ¶å…è®¸ç”Ÿæˆå™¨æ ¹æ®æ‰¹è¯„å™¨çš„å»ºè®®è¿›è¡Œè§£ç­”çš„å†ç”Ÿæˆã€‚

## ğŸ“Š å®éªŒäº®ç‚¹

åœ¨MATH500å’ŒProcessBenchåŸºå‡†æµ‹è¯•ä¸­ï¼ŒMATH-VFæ¡†æ¶çš„éªŒè¯å‡†ç¡®ç‡æ˜¾è‘—é«˜äºç°æœ‰æ–¹æ³•ï¼Œå…·ä½“æå‡å¹…åº¦è¾¾åˆ°20%ä»¥ä¸Šï¼Œå±•ç¤ºäº†å…¶åœ¨æ•°å­¦é—®é¢˜æ±‚è§£ä¸­çš„æœ‰æ•ˆæ€§å’Œå¯é æ€§ã€‚

## ğŸ¯ åº”ç”¨åœºæ™¯

è¯¥ç ”ç©¶çš„æ½œåœ¨åº”ç”¨é¢†åŸŸåŒ…æ‹¬æ•™è‚²ã€è‡ªåŠ¨åŒ–æ•°å­¦è§£ç­”ç³»ç»Ÿä»¥åŠç§‘å­¦è®¡ç®—ç­‰ã€‚é€šè¿‡æé«˜å¤§å‹è¯­è¨€æ¨¡å‹åœ¨æ•°å­¦é—®é¢˜æ±‚è§£ä¸­çš„å‡†ç¡®æ€§ï¼ŒMATH-VFèƒ½å¤Ÿä¸ºå­¦ç”Ÿæä¾›æ›´å¯é çš„å­¦ä¹ è¾…åŠ©å·¥å…·ï¼Œå¹¶ä¸ºç§‘ç ”äººå‘˜æä¾›é«˜æ•ˆçš„æ•°å­¦é—®é¢˜è§£å†³æ–¹æ¡ˆï¼Œæœªæ¥å¯èƒ½å¯¹æ•™è‚²å’Œç§‘ç ”äº§ç”Ÿæ·±è¿œå½±å“ã€‚

## ğŸ“„ æ‘˜è¦ï¼ˆåŸæ–‡ï¼‰

> Large Language Models (LLMs) have demonstrated formidable capabilities in solving mathematical problems, yet they may still commit logical reasoning and computational errors during the problem-solving process. Thus, this paper proposes a framework, MATH-VF, which includes a Formalizer and a Critic, for formally verifying the correctness of the solutions generated by large language models. Our framework first utilizes a Formalizer which employs an LLM to translate a natural language solution into a formal context. Afterward, our Critic (which integrates various external tools such as a Computer Algebra System and an SMT solver) evaluates the correctness of each statement within the formal context, and when a statement is incorrect, our Critic provides corrective feedback. We empirically investigate the effectiveness of MATH-VF in two scenarios: 1) Verification: MATH-VF is utilized to determine the correctness of a solution to a given problem. 2) Refinement: When MATH-VF identifies errors in the solution generated by an LLM-based solution generator for a given problem, it submits the corrective suggestions proposed by the Critic to the solution generator to regenerate the solution. We evaluate our framework on widely used mathematical benchmarks: MATH500 and ProcessBench, demonstrating the superiority of our approach over existing approaches.

