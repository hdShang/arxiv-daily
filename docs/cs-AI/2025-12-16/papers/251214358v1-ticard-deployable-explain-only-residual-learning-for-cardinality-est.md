---
layout: default
title: TiCard: Deployable EXPLAIN-only Residual Learning for Cardinality Estimation
---

# TiCard: Deployable EXPLAIN-only Residual Learning for Cardinality Estimation

<div class="paper-toolbar">
  <a href="https://arxiv.org/abs/2512.14358" class="toolbar-btn" target="_blank">ğŸ“„ arXiv: 2512.14358v1</a>
  <a href="https://arxiv.org/pdf/2512.14358.pdf" class="toolbar-btn" target="_blank">ğŸ“¥ PDF</a>
  <button class="toolbar-btn favorite-btn" data-arxiv-id="2512.14358v1" onclick="toggleFavorite(this, '2512.14358v1', 'TiCard: Deployable EXPLAIN-only Residual Learning for Cardinality Estimation')" title="æ·»åŠ åˆ°æ”¶è—å¤¹">â˜† æ”¶è—</button>
  <button class="toolbar-btn" onclick="copyLinkToClipboard(this)">ğŸ”— åˆ†äº«</button>
</div>


**ä½œè€…**: Qizhi Wang

**åˆ†ç±»**: cs.AI, cs.DB

**å‘å¸ƒæ—¥æœŸ**: 2025-12-16

**å¤‡æ³¨**: 16 pages(/wo references), 4 figures, 10 tables

---

## ğŸ’¡ ä¸€å¥è¯è¦ç‚¹

**TiCardï¼šä¸€ç§å¯éƒ¨ç½²çš„ã€ä»…ä½¿ç”¨EXPLAINä¿¡æ¯çš„åŸºæ•°ä¼°è®¡æ®‹å·®å­¦ä¹ æ¡†æ¶**

ğŸ¯ **åŒ¹é…é¢†åŸŸ**: **æ”¯æŸ±ä¹ï¼šå…·èº«å¤§æ¨¡å‹ (Embodied Foundation Models)**

**å…³é”®è¯**: `åŸºæ•°ä¼°è®¡` `æŸ¥è¯¢ä¼˜åŒ–` `æ®‹å·®å­¦ä¹ ` `ä½ä¾µå…¥æ€§` `EXPLAIN` `AI4DB` `æ¢¯åº¦æå‡å›å½’` `TabPFN`

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

1. ç°æœ‰åŸºæ•°ä¼°è®¡æ–¹æ³•éš¾ä»¥å…¼é¡¾å‡†ç¡®æ€§å’Œå¯éƒ¨ç½²æ€§ï¼Œä¼ ç»Ÿæ–¹æ³•å¿½ç•¥ç›¸å…³æ€§ï¼Œå­¦ä¹ æ–¹æ³•éœ€è¦å¤§é‡è®­ç»ƒå’Œä¾µå…¥å¼é›†æˆã€‚
2. TiCardé€šè¿‡å­¦ä¹ æ®‹å·®æ ¡æ­£æ¥å¢å¼ºåŸç”Ÿä¼°è®¡å™¨ï¼Œä»…ä½¿ç”¨EXPLAINä¿¡æ¯ï¼Œæ— éœ€ä¿®æ”¹æ•°æ®åº“å†…æ ¸ï¼Œé™ä½äº†éƒ¨ç½²éš¾åº¦ã€‚
3. å®éªŒè¡¨æ˜ï¼Œåœ¨ä½è·Ÿè¸ªè®¾ç½®ä¸‹ï¼ŒTiCardæ˜¾è‘—æé«˜äº†å°¾éƒ¨ç²¾åº¦ï¼ŒP90å’ŒP99 Q-errorå‡å¤§å¹…é™ä½ï¼ŒåŒæ—¶ä¿æŒäº†ä¸­é—´å€¼çš„å‡†ç¡®æ€§ã€‚

## ğŸ“ æ‘˜è¦ï¼ˆä¸­æ–‡ï¼‰

åŸºæ•°ä¼°è®¡æ˜¯åŸºäºä»£ä»·çš„æŸ¥è¯¢ä¼˜åŒ–çš„å…³é”®ç“¶é¢ˆï¼Œä½†å¯éƒ¨ç½²çš„æ”¹è¿›ä»ç„¶å›°éš¾ï¼šä¼ ç»Ÿä¼°è®¡å™¨ä¼šé—æ¼ç›¸å…³æ€§ï¼Œè€Œå­¦ä¹ å‹ä¼°è®¡å™¨é€šå¸¸éœ€è¦ç‰¹å®šäºå·¥ä½œè´Ÿè½½çš„è®­ç»ƒæµç¨‹ä»¥åŠå¯¹ä¼˜åŒ–å™¨çš„ä¾µå…¥å¼é›†æˆã€‚æœ¬æ–‡æå‡ºäº†TiCardï¼Œä¸€ä¸ªä½ä¾µå…¥ã€åŸºäºæ ¡æ­£çš„æ¡†æ¶ï¼Œå®ƒå¢å¼ºï¼ˆè€Œä¸æ˜¯æ›¿æ¢ï¼‰æ•°æ®åº“çš„åŸç”Ÿä¼°è®¡å™¨ã€‚TiCardä½¿ç”¨ä»…æ¥è‡ªEXPLAINçš„ç‰¹å¾å­¦ä¹ ä¹˜æ³•æ®‹å·®æ ¡æ­£ï¼Œå¹¶ä¸”ä»…ä½¿ç”¨EXPLAIN ANALYZEè¿›è¡Œç¦»çº¿æ ‡ç­¾ç”Ÿæˆã€‚æˆ‘ä»¬ç ”ç©¶äº†ä¸¤ä¸ªå®é™…çš„å®ä¾‹åŒ–ï¼šï¼ˆiï¼‰ç”¨äºäºšæ¯«ç§’çº§æ¨ç†çš„æ¢¯åº¦æå‡å›å½’å™¨ï¼Œä»¥åŠï¼ˆiiï¼‰TabPFNï¼Œä¸€ç§é€šè¿‡åˆ·æ–°å°å‹å‚è€ƒé›†æ¥é€‚åº”çš„ä¸Šä¸‹æ–‡è¡¨æ ¼åŸºç¡€æ¨¡å‹ï¼Œæ— éœ€æ¢¯åº¦é‡æ–°è®­ç»ƒã€‚åœ¨ä½¿ç”¨TPCHå’ŒJoin Order Benchmarkçš„TiDBä¸Šï¼Œåœ¨ä½è·Ÿè¸ªè®¾ç½®ï¼ˆæ€»å…±263æ¬¡æ‰§è¡Œï¼›157æ¬¡ç”¨äºå­¦ä¹ ï¼‰ä¸­ï¼ŒTiCardæ˜¾è‘—æé«˜äº†ç®—å­çº§åˆ«çš„å°¾éƒ¨ç²¾åº¦ï¼šP90 Q-errorä»312.85ï¼ˆåŸç”Ÿï¼‰é™è‡³13.69ï¼ˆTiCard-GBRï¼‰ï¼ŒP99ä»37,974.37é™è‡³3,416.50ï¼ˆTiCard-TabPFNï¼‰ï¼Œè€Œä»…è¿æ¥ç­–ç•¥ä¿æŒäº†è¿‘ä¹å®Œç¾çš„ä¸­é—´å€¼è¡Œä¸ºã€‚æˆ‘ä»¬å°†TiCardå®šä½ä¸ºä¸“æ³¨äºå¯éƒ¨ç½²æ€§çš„AI4DBæ„å»ºå—ï¼šæ˜ç¡®çš„èŒƒå›´ã€ä¿å®ˆçš„é›†æˆç­–ç•¥ä»¥åŠä»ç¦»çº¿æ ¡æ­£åˆ°ä¼˜åŒ–å™¨å†…ä½¿ç”¨çš„é›†æˆè·¯çº¿å›¾ã€‚

## ğŸ”¬ æ–¹æ³•è¯¦è§£

**é—®é¢˜å®šä¹‰**ï¼šåŸºæ•°ä¼°è®¡æ˜¯æŸ¥è¯¢ä¼˜åŒ–çš„å…³é”®ï¼Œå‡†ç¡®çš„åŸºæ•°ä¼°è®¡èƒ½å¸®åŠ©ä¼˜åŒ–å™¨é€‰æ‹©æœ€ä½³æ‰§è¡Œè®¡åˆ’ã€‚ç„¶è€Œï¼Œä¼ ç»ŸåŸºæ•°ä¼°è®¡å™¨éš¾ä»¥æ•æ‰å¤æ‚çš„ç›¸å…³æ€§ï¼Œå¯¼è‡´ä¼°è®¡ä¸å‡†ç¡®ã€‚è€Œå­¦ä¹ å‹åŸºæ•°ä¼°è®¡å™¨è™½ç„¶ç²¾åº¦è¾ƒé«˜ï¼Œä½†é€šå¸¸éœ€è¦é’ˆå¯¹ç‰¹å®šå·¥ä½œè´Ÿè½½è¿›è¡Œè®­ç»ƒï¼Œå¹¶ä¸”éœ€è¦æ·±å…¥é›†æˆåˆ°æ•°æ®åº“ä¼˜åŒ–å™¨ä¸­ï¼Œéƒ¨ç½²æˆæœ¬é«˜æ˜‚ã€‚

**æ ¸å¿ƒæ€è·¯**ï¼šTiCardçš„æ ¸å¿ƒæ€è·¯æ˜¯é‡‡ç”¨ä¸€ç§ä½ä¾µå…¥æ€§çš„æ–¹å¼ï¼Œé€šè¿‡å­¦ä¹ æ®‹å·®æ ¡æ­£æ¥å¢å¼ºæ•°æ®åº“çš„åŸç”ŸåŸºæ•°ä¼°è®¡å™¨ï¼Œè€Œä¸æ˜¯å®Œå…¨æ›¿æ¢å®ƒã€‚è¿™ç§æ–¹æ³•åˆ©ç”¨åŸç”Ÿä¼°è®¡å™¨çš„å…ˆéªŒçŸ¥è¯†ï¼Œå¹¶é€šè¿‡å­¦ä¹ åˆ°çš„æ ¡æ­£é¡¹æ¥å¼¥è¡¥å…¶ä¸è¶³ï¼Œä»è€Œåœ¨ä¿è¯ä¸€å®šå‡†ç¡®æ€§çš„å‰æä¸‹ï¼Œé™ä½äº†éƒ¨ç½²çš„å¤æ‚æ€§ã€‚

**æŠ€æœ¯æ¡†æ¶**ï¼šTiCardçš„æ•´ä½“æ¡†æ¶åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªä¸»è¦é˜¶æ®µï¼š1) ä½¿ç”¨EXPLAINè¯­å¥ä»æ•°æ®åº“ä¸­æå–ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾æè¿°äº†æŸ¥è¯¢çš„ç»“æ„å’Œæ•°æ®åˆ†å¸ƒã€‚2) ä½¿ç”¨EXPLAIN ANALYZEè¯­å¥è·å–çœŸå®çš„åŸºæ•°ä½œä¸ºæ ‡ç­¾ï¼Œç”¨äºè®­ç»ƒæ¨¡å‹ã€‚3) è®­ç»ƒä¸€ä¸ªæ®‹å·®æ ¡æ­£æ¨¡å‹ï¼Œè¯¥æ¨¡å‹å­¦ä¹ å¦‚ä½•æ ¹æ®EXPLAINç‰¹å¾æ¥æ ¡æ­£åŸç”Ÿä¼°è®¡å™¨çš„è¾“å‡ºã€‚4) åœ¨æŸ¥è¯¢ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆä½¿ç”¨åŸç”Ÿä¼°è®¡å™¨è¿›è¡ŒåŸºæ•°ä¼°è®¡ï¼Œç„¶åä½¿ç”¨è®­ç»ƒå¥½çš„æ®‹å·®æ ¡æ­£æ¨¡å‹å¯¹ä¼°è®¡ç»“æœè¿›è¡Œæ ¡æ­£ï¼Œæœ€ç»ˆå¾—åˆ°æ›´å‡†ç¡®çš„åŸºæ•°ä¼°è®¡ã€‚

**å…³é”®åˆ›æ–°**ï¼šTiCardçš„å…³é”®åˆ›æ–°åœ¨äºå…¶ä½ä¾µå…¥æ€§çš„è®¾è®¡å’Œå¯¹EXPLAINä¿¡æ¯çš„å·§å¦™åˆ©ç”¨ã€‚å®ƒä¸éœ€è¦ä¿®æ”¹æ•°æ®åº“å†…æ ¸ï¼Œåªéœ€è¦ä½¿ç”¨EXPLAINè¯­å¥æ¥æå–ç‰¹å¾ï¼Œå¹¶ä½¿ç”¨EXPLAIN ANALYZEè¯­å¥æ¥è·å–æ ‡ç­¾ã€‚è¿™ç§è®¾è®¡ä½¿å¾—TiCardå¯ä»¥å¾ˆå®¹æ˜“åœ°éƒ¨ç½²åˆ°ç°æœ‰çš„æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œè€Œæ— éœ€è¿›è¡Œå¤§é‡çš„ä¿®æ”¹å’Œæµ‹è¯•ã€‚æ­¤å¤–ï¼ŒTiCardè¿˜æ¢ç´¢äº†ä¸¤ç§ä¸åŒçš„æ®‹å·®æ ¡æ­£æ¨¡å‹ï¼šæ¢¯åº¦æå‡å›å½’å™¨ï¼ˆGBRï¼‰å’ŒTabPFNï¼Œä»¥é€‚åº”ä¸åŒçš„æ€§èƒ½éœ€æ±‚ã€‚

**å…³é”®è®¾è®¡**ï¼šTiCardçš„å…³é”®è®¾è®¡åŒ…æ‹¬ï¼š1) ä½¿ç”¨ä¹˜æ³•æ®‹å·®æ ¡æ­£ï¼Œå³å­¦ä¹ ä¸€ä¸ªæ ¡æ­£å› å­ï¼Œè€Œä¸æ˜¯ç›´æ¥é¢„æµ‹åŸºæ•°ã€‚2) ä½¿ç”¨EXPLAINè¯­å¥ä¸­çš„ç‰¹å¾ï¼Œä¾‹å¦‚æ“ä½œç±»å‹ã€è°“è¯ã€è¿æ¥é”®ç­‰ã€‚3) ä½¿ç”¨EXPLAIN ANALYZEè¯­å¥è·å–çœŸå®çš„åŸºæ•°ï¼Œä½œä¸ºè®­ç»ƒæ ‡ç­¾ã€‚4) æ¢ç´¢äº†ä¸¤ç§ä¸åŒçš„æ®‹å·®æ ¡æ­£æ¨¡å‹ï¼šGBRå’ŒTabPFNã€‚GBRå…·æœ‰äºšæ¯«ç§’çº§çš„æ¨ç†é€Ÿåº¦ï¼Œé€‚åˆå¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ã€‚TabPFNæ˜¯ä¸€ç§ä¸Šä¸‹æ–‡å­¦ä¹ æ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡åˆ·æ–°å‚è€ƒé›†æ¥é€‚åº”æ–°çš„æ•°æ®åˆ†å¸ƒï¼Œæ— éœ€é‡æ–°è®­ç»ƒã€‚

## ğŸ“Š å®éªŒäº®ç‚¹

å®éªŒç»“æœè¡¨æ˜ï¼ŒTiCardåœ¨TiDBæ•°æ®åº“ä¸Šä½¿ç”¨TPCHå’ŒJoin Order Benchmarkè¿›è¡Œæµ‹è¯•ï¼Œåœ¨ä½è·Ÿè¸ªè®¾ç½®ä¸‹æ˜¾è‘—æé«˜äº†ç®—å­çº§åˆ«çš„å°¾éƒ¨ç²¾åº¦ã€‚å…·ä½“æ¥è¯´ï¼ŒTiCard-GBRå°†P90 Q-errorä»åŸç”Ÿä¼°è®¡å™¨çš„312.85é™ä½åˆ°13.69ï¼Œè€ŒTiCard-TabPFNå°†P99 Q-errorä»37,974.37é™ä½åˆ°3,416.50ã€‚åŒæ—¶ï¼ŒTiCardä¿æŒäº†è¿‘ä¹å®Œç¾çš„ä¸­é—´å€¼è¡Œä¸ºï¼Œè¡¨æ˜å…¶åœ¨æé«˜å°¾éƒ¨ç²¾åº¦çš„åŒæ—¶ï¼Œæ²¡æœ‰ç‰ºç‰²æ•´ä½“çš„å‡†ç¡®æ€§ã€‚

## ğŸ¯ åº”ç”¨åœºæ™¯

TiCardå¯åº”ç”¨äºå„ç§éœ€è¦ç²¾ç¡®åŸºæ•°ä¼°è®¡çš„æ•°æ®åº“ç³»ç»Ÿï¼Œä¾‹å¦‚OLTPå’ŒOLAPæ•°æ®åº“ã€‚é€šè¿‡æé«˜åŸºæ•°ä¼°è®¡çš„å‡†ç¡®æ€§ï¼ŒTiCardå¯ä»¥å¸®åŠ©æŸ¥è¯¢ä¼˜åŒ–å™¨é€‰æ‹©æ›´ä¼˜çš„æ‰§è¡Œè®¡åˆ’ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚æ­¤å¤–ï¼ŒTiCardçš„ä½ä¾µå…¥æ€§è®¾è®¡ä½¿å…¶æ˜“äºéƒ¨ç½²åˆ°ç°æœ‰çš„æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œé™ä½äº†éƒ¨ç½²æˆæœ¬ã€‚æœªæ¥ï¼ŒTiCardå¯ä»¥è¿›ä¸€æ­¥æ‰©å±•åˆ°æ”¯æŒæ›´å¤æ‚çš„æŸ¥è¯¢å’Œæ•°æ®ç±»å‹ï¼Œå¹¶ä¸å…¶ä»–AI4DBæŠ€æœ¯ç›¸ç»“åˆï¼Œæ„å»ºæ›´æ™ºèƒ½çš„æ•°æ®åº“ç³»ç»Ÿã€‚

## ğŸ“„ æ‘˜è¦ï¼ˆåŸæ–‡ï¼‰

> Cardinality estimation is a key bottleneck for cost-based query optimization, yet deployable improvements remain difficult: classical estimators miss correlations, while learned estimators often require workload-specific training pipelines and invasive integration into the optimizer. This paper presents TiCard, a low intrusion, correction-based framework that augments (rather than replaces) a database's native estimator. TiCard learns multiplicative residual corrections using EXPLAIN-only features, and uses EXPLAIN ANALYZE only for offline labels. We study two practical instantiations: (i) a Gradient Boosting Regressor for sub-millisecond inference, and (ii) TabPFN, an in-context tabular foundation model that adapts by refreshing a small reference set without gradient retraining. On TiDB with TPCH and the Join Order Benchmark, in a low-trace setting (263 executions total; 157 used for learning), TiCard improves operator-level tail accuracy substantially: P90 Q-error drops from 312.85 (native) to 13.69 (TiCard-GBR), and P99 drops from 37,974.37 to 3,416.50 (TiCard-TabPFN), while a join-only policy preserves near-perfect median behavior. We position TiCard as an AI4DB building block focused on deployability: explicit scope, conservative integration policies, and an integration roadmap from offline correction to in-optimizer use.

